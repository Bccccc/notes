{% extends "base.html" %}
<title>Bootstrap Example</title>
{% block head %}
<script>
        function format_link(href,text) {
            output = "<a href=\"" + href + "\">" + text + "</a>"
            return output
        }
    
        function format_icon(href,icon) {
            icon = "<img src=\"" + icon + "\" alt=\"ABC\" width=\"42\" height=\"42\" border=\"0\">";
            output = "<a href=\"" + href + "\">" + icon + "</a>"
            return output
        }
    
        function format_notes(data) {
            function format_note(n) {
                id_cell = "<td>" + n.id + "</td>"
                text_cell = "<td>" + n.text + "</td>"
                //link_cell = "<td>" + format_link("/remove/" + n.id,"Remove") + "</td>"
                link_cell = "<td>" + format_icon("/remove/" + n.id,"/static/delete.png") + "</td>"
                return "<tr>" + text_cell + link_cell + "</tr>";
            }
            notes_data = data["data"];
            output = '<table class="table table-bordered">';
            for (i in notes_data) {
                output += format_note(notes_data[i]);
            }
            return output + "</table>";
        }
    
        $(document).ready(function() {
    
            $("#filter_button").click(function() {
                filter = $("#filter").val()
                $.get("/content/" + filter, function(data) {
                    $("#content").html(format_notes(data));
                });
            });
    
            $.get("/content/", function(data) {
                $("#content").html(format_notes(data));
            });
        });
    </script>
{% endblock %}
{% block body %}
<h3>Notes</h3>
    <hr>
    <input type="text" id="filter" name="filter" value=""/>
    &nbsp;
    <button id="filter_button">Filter</button>
    <hr>
    <div id="content"></div>
    <hr>
    <form method="post" action="/notes">
        <table class="table table-bordered">
            <tr>
                <td>User</td>
                <td><input type="text" id="user_text" name="user" value="{{session.get('user','')}}"/></td>
            </tr>
            <tr>
                <td>Note</td>
                <td><input type="text" id="note_text" name="note" value=""/></td>
            </tr>
            <tr>
                <td></td>
                <td style="float:right"><input type="submit" id="submit_button" value="Submit"/></td>
            </tr>
        </table>
    </form>
    <hr>

{% endblock %}